package skj;

import robocode.HitRobotEvent;
import robocode.Robot;
import robocode.ScannedRobotEvent;
import robocode.WinEvent;
import static robocode.util.Utils.normalRelativeAngleDegrees;

import java.awt.*;

public class MyRobot extends Robot {
	
	boolean camp = true;
	double moveAmount;
	
	public void run() {
		// Set colors
		setBodyColor(Color.BLACK);
		setGunColor(Color.BLACK);
		setRadarColor(Color.BLACK);
		setScanColor(Color.BLACK);
		setBulletColor(Color.BLACK);

		moveAmount = Math.max(getBattleFieldWidth(), getBattleFieldHeight());
		
		resetCamp();
		
		while (true) {
			//turnRadarRight(360);
			
			if (camp == true) {
				camp();
			} else {
				scan();
			}
		}
	}
	
	public void approach(ScannedRobotEvent e) {
		turnRight(e.getBearing());
		ahead(100);
		shoot(e);
	}
	
	public void onScannedRobot(ScannedRobotEvent e) {
		if (e.getDistance() < 550) {
			camp = false;
			approach(e);
		} else {
			if (camp == false) {
				resetCamp();
			} else {
				camp();
			}
		}
		
		shoot(e);
	}
	
	public void resetCamp() {
		turnRight(getHeading() % 90);
		ahead(moveAmount);
		turnRight(90);
		turnGunRight(90);
	}
	
	public void camp() {
		ahead(moveAmount);
		turnRight(90);
	}
	
	public void shoot(ScannedRobotEvent e) {
		turnGunRight(e.getBearing());
		if (e.getDistance() < 200) {
			fire(3);
		} else if (e.getDistance() < 550) {
			ahead(100);
			fire(2);
		} else {
			fire(1);
		}
	}

	public void onHitRobot(HitRobotEvent e) {
		//sdf
	}
}
